# 로또 번호 생성기

한국 로또 6/45의 역대 당첨번호를 바탕으로 중복되지 않는 새로운 번호 조합을 생성하는 Rust 프로그램입니다.

## 주요 기능

- **5개 세트 추첨**: 실제 로또 구매와 같이 5개 묶음으로 번호 생성
- **특정 수 포함 추첨**: 원하는 번호를 포함한 5개 세트 반자동 추첨
- **빈도 기반 수 추천**: 가장 낮은 빈도수 번호부터 순차 추천
- **중복 방지**: 1등 및 2등 당첨번호와 중복되지 않는 번호 조합 생성
- **엑셀 파일 파싱**: 기존 로또 당첨번호 데이터를 엑셀 파일에서 자동 파싱
- **데이터 관리**: 텍스트 파일 형태로 당첨번호 데이터 저장 및 로드
- **신규 회차 추가**: 새로운 회차의 당첨번호를 수동으로 추가 가능

## 프로젝트 구조

```
lottery/
├── src/
│   └── main.rs          # 메인 프로그램 소스 코드
├── static/
│   ├── 1-600.xls        # 1~600회차 당첨번호 데이터
│   └── 601-1187.xls     # 601~1187회차 당첨번호 데이터
├── lottery_data.txt     # 파싱된 당첨번호 텍스트 데이터
├── Cargo.toml           # 프로젝트 설정 및 의존성
└── README.md            # 프로젝트 문서
```

## 설치 및 실행

### 필요 조건

- Rust 1.70.0 이상
- Cargo (Rust 패키지 매니저)

### 의존성

- `scraper`: HTML/엑셀 파일 파싱
- `serde`: 데이터 직렬화/역직렬화
- `rand`: 난수 생성
- `encoding_rs`: EUC-KR 인코딩 지원

### 실행 방법

```bash
# 프로젝트 클론
git clone <repository-url>
cd lottery

# 빌드 및 실행
cargo run
```

## 사용법

프로그램을 실행하면 다음 메뉴가 표시됩니다:

```
=== 로또 번호 추첨기 ===
1. 새로운 로또 번호 추첨 (5개 세트)
2. 특정 수 포함 번호 추첨 (반자동, 5개 세트)
3. 수 추천 (빈도 기반)
4. 신규 회차 추가
5. 종료
```

### 1. 새로운 로또 번호 추첨 (5개 세트)

기존 1등 및 2등 당첨번호와 중복되지 않는 5개 세트의 번호를 자동으로 생성합니다.

**예시 출력:**
```
=== 추천 로또 번호 5개 세트 ===
1: [3, 12, 18, 25, 31, 44]
2: [7, 14, 22, 28, 35, 41]
3: [5, 16, 24, 30, 38, 43]
4: [2, 19, 26, 32, 39, 45]
5: [8, 15, 21, 27, 34, 42]
(기존 1등, 2등 당첨번호 제외)
```

### 2. 특정 수 포함 번호 추첨 (반자동, 5개 세트)

원하는 번호를 포함하여 5개 세트의 번호를 생성합니다. 특정 번호를 꼭 포함한 조합을 원할 때 사용합니다.

**사용법:**
```
포함할 번호들 (공백으로 구분): 7 23
```

**예시 출력:**
```
=== 특정 수 포함 추천 로또 번호 5개 세트 ===
1: [7, 12, 23, 31, 38, 44]
2: [7, 15, 23, 28, 35, 41]
3: [7, 19, 23, 30, 36, 43]
4: [7, 14, 23, 32, 39, 45]
5: [7, 18, 23, 27, 34, 42]
포함된 수: [7, 23]
(기존 1등, 2등 당첨번호 제외)
```

### 3. 수 추천 (빈도 기반)

현재까지의 1~45 번호 중 1,2등에서 가장 낮은 빈도를 기록한 수부터 순서대로 추천합니다.

**예시:**
```
=== 빈도 기반 수 추천 ===
가장 낮은 빈도순으로 정렬:
추천 수: 32 (빈도: 143회)
다음 수를 보시겠습니까? (Enter: 다음, q: 종료):
```

### 4. 신규 회차 추가

새로운 회차의 당첨번호를 수동으로 추가할 수 있습니다. 현재 저장된 회차 범위도 함께 표시됩니다.

**사용법:**
```
=== 신규 회차 추가 ===
현재 저장된 회차: 1회 ~ 1187회 (총 1187개)
회차: 1188
1등 번호 6개 (공백으로 구분): 3 7 12 25 31 44
보너스 번호: 15
1188회차 데이터가 추가되었습니다.
업데이트된 회차: 1회 ~ 1188회 (총 1188개)
```

### 5. 종료

프로그램을 종료합니다.

## 데이터 구조

### LotteryDrawing

```rust
struct LotteryDrawing {
    round: u32,      // 회차 번호
    numbers: [u8; 6], // 당첨번호 6개 (1-45)
    bonus: u8,       // 보너스번호 (1-45)
}
```

### 텍스트 파일 형식

```
회차,당첨번호1,당첨번호2,당첨번호3,당첨번호4,당첨번호5,당첨번호6,보너스번호
1,10,23,29,33,37,40,16
2,9,13,21,25,32,42,2
...
```

## 알고리즘

### 중복 제거 알고리즘
1. **1등 중복 제거**: 기존 1등 당첨번호 조합을 HashSet에 저장
2. **2등 중복 제거**: 1등 번호 중 하나를 보너스 번호로 교체한 조합도 제외

### 번호 생성 알고리즘
1. **완전 랜덤**: 1-45 범위에서 6개 번호를 무작위로 선택
2. **특정 수 포함**: 지정된 번호를 포함하여 나머지 자리를 랜덤 선택
3. **중복 검사**: 생성된 조합이 기존 당첨번호와 중복되지 않을 때까지 반복

### 빈도 분석 알고리즘
1. **1등 번호 빈도**: 모든 회차의 1등 번호 출현 횟수 계산
2. **2등 영향**: 보너스 번호도 2등에 영향을 주므로 빈도에 포함
3. **정렬**: 빈도 오름차순으로 정렬하여 가장 낮은 빈도부터 제공

## 특징

- **사용자 친화적 인터페이스**: 각 기능 사용 후 메뉴 자동 재표시
- **실용성**: 실제 로또 구매 형태인 5개 묶음으로 번호 제공
- **안전한 입력 처리**: EOF 및 입력 오류에 대한 적절한 처리
- **데이터 무결성**: 회차별 데이터 정렬 및 중복 방지

## 라이선스

MIT License

## 기여

버그 리포트나 기능 제안은 Issues를 통해 제출해주세요.